/*! grapesjs-dinvitations - 1.0.1 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["grapesjs-dinvitations"]=t():e["grapesjs-dinvitations"]=t()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var i in o)e.o(o,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:o[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};e.r(t),e.d(t,{default:()=>a});const o=e=>{e.TraitManager.addType("file-asset",{createInput(){const t=document.createElement("div"),o=document.createElement("input");o.setAttribute("type","text"),o.value=this.model.get("value")||"";const i=document.createElement("button");return i.innerHTML="Choose Video",i.type="button",i.className="gjs-file-asset-btn",i.style="margin-left: 5px;",i.addEventListener("click",(()=>{const t=this.target;t&&e.AssetManager.open({types:['video'],accept:'video/*',select(e){const o=e.get("src");t.set("video-src",o),t.addAttributes({"video-src":o}),t.view&&t.view.render()}})})),t.appendChild(o),t.appendChild(i),this.inputEl=o,t},onUpdate(){const e=this.model.get("value")||"";this.inputEl&&(this.inputEl.value=e)},onEvent(){if(!this.inputEl)return;const e=this.inputEl.value.trim();this.model.set("value",e),this.target.set("video-src",e),this.target.addAttributes({"video-src":e})}})},i={'grapesjs-dinvitations':{}},a=function(e){const t={i18n:{},...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};o(e),function(e){e.DomComponents.addType("background-video",{extend:"default",model:{defaults:{tagName:"div",draggable:!0,droppable:!0,attributes:{class:"background-video-wrapper"},provider:"html5",components:[],styles:`\n          .background-video-wrapper {\n            position: relative;\n            width: 100%;\n            height: 0;\n            padding-bottom: 56.25%;\n            overflow: hidden;\n          }\n          .background-video-wrapper iframe,\n          .background-video-wrapper video {\n            position: absolute;\n            top: 0; left: 0;\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n          }\n        `,traits:[{type:"text",name:"overlayId",label:"Overlay ID",changeProp:1},{type:"select",name:"provider",label:"Video Provider",changeProp:1,options:[{value:"html5",name:"Uploaded Video"},{value:"youtube",name:"YouTube"},{value:"youtube-nocookie",name:"YouTube (No Cookie)"},{value:"vimeo",name:"Vimeo"}]},{type:"file-asset",label:"Upload Video",name:"video-src",changeProp:1},{type:"text",name:"embed-src",label:"Embed ID",changeProp:1},{type:"color",label:"Overlay Color",name:"overlay-color",changeProp:1}]},init(){if(!this.get("overlayId")){const e=`video-overlay-${Date.now()}-${Math.floor(1e3*Math.random())}`;this.set("overlayId",e)}this.listenTo(this,"change:provider",this.updateProvider),this.listenTo(this,"change:video-src",this.updateHtml5Src),this.listenTo(this,"change:embed-src",this.updateEmbedSrc),this.listenTo(this,"change:overlay-color",this.updateOverlayColor),this.updateProvider()},updateProvider(){const e=this.get("provider"),t=this.get("components"),o=this.get("overlayId"),i=t.find((e=>e.getAttributes().id===o));let a;if(t.filter((e=>{const t=e.get("tagName");return"video"===t||"iframe"===t})).forEach((e=>t.remove(e))),"html5"===e)a={tagName:"video",type:"video",attributes:{autoplay:!0,loop:!0,muted:!0,playsinline:!0,controls:!1,src:this.get("video-src")||"",style:"width:100%; height:100%; object-fit:cover;"},draggable:!1};else{const t=this.get("embed-src")||"";let o="";"youtube"===e?o=`https://www.youtube.com/embed/${t}?autoplay=1&mute=1&loop=1&playlist=${t}`:"youtube-nocookie"===e?o=`https://www.youtube-nocookie.com/embed/${t}?autoplay=1&mute=1&loop=1&playlist=${t}`:"vimeo"===e&&(o=`https://player.vimeo.com/video/${t}?autoplay=1&muted=1&loop=1&background=1`),a={tagName:"iframe",attributes:{src:o,frameborder:0,allow:"autoplay; fullscreen",allowfullscreen:!0,style:"width:100%; height:100%;"},draggable:!1}}const n=i?t.indexOf(i):t.length;t.add(a,{at:n}),this.updateOverlayColor()},updateHtml5Src(){if("html5"!==this.get("provider"))return;const e=this.get("components").find((e=>"video"===e.get("tagName")));e&&e.set("src",this.get("video-src"))},updateEmbedSrc(){"html5"!==this.get("provider")&&this.updateProvider()},updateOverlayColor(){const e=this.get("components"),t=this.get("overlayId"),o=this.get("overlay-color")||"rgba(0,0,0,0.3)";let i=e.find((e=>e.getAttributes().id===t));if(!i){const a=this.addOverlayComponent(o);e.add(a),i=e.find((e=>e.getAttributes().id===t))}const a=i.getStyle()||{};i.setStyle({...a,background:o})},addOverlayComponent(e){return{tagName:"div",attributes:{id:this.get("overlayId"),class:"video-overlay"},style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:e},draggable:!1}}}})}(e),(e=>{e.BlockManager.add('background-video',{label:'Background Video',category:'Basic',media:`\n      <svg viewBox="0 0 24 24">\n        <path fill="currentColor" d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />\n      </svg>\n    `,content:{type:'background-video'},select:!0,activate:!0})})(e),e.I18n&&e.I18n.addMessages({en:i,...t.i18n})};return t})()));
//# sourceMappingURL=index.js.map