/*! grapesjs-style-gpickr - 1.0.3 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["grapesjs-style-gpickr"]=t():e["grapesjs-style-gpickr"]=t()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.r(t),e.d(t,{default:()=>P});function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u="__bg-type",p='style="max-height: 16px; display: block" viewBox="0 0 24 24"',s={name:" ",property:u,type:"radio",defaults:"img",options:[{value:"img",name:"<svg ".concat(p,"><path fill=\"currentColor\" d=\"M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2z\"/></svg>")},{value:"color",name:"<svg ".concat(p,"><path fill=\"currentColor\" d=\"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2z\"/></svg>")},{value:"grad",name:"<svg ".concat(p,"><path fill=\"currentColor\" d=\"M11 9h2v2h-2V9m-2 2h2v2H9v-2m4 0h2v2h-2v-2m2-2h2v2h-2V9M7 9h2v2H7V9m12-6H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2M9 18H7v-2h2v2m4 0h-2v-2h2v2m4 0h-2v-2h2v2m2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z\"/></svg>")}]},d={name:" ",property:"background-image",type:"file",functionName:"url",defaults:"none",value:"none"},f={property:"background-repeat",type:"select",defaults:"repeat",value:"repeat",options:[{value:"repeat"},{value:"repeat-x"},{value:"repeat-y"},{value:"no-repeat"}]},g={property:"background-position",type:"select",defaults:"left top",value:"left top",options:[{value:"left top"},{value:"left center"},{value:"left bottom"},{value:"right top"},{value:"right center"},{value:"right bottom"},{value:"center top"},{value:"center center"},{value:"center bottom"}]},y={property:"background-attachment",type:"select",defaults:"scroll",value:"scroll",options:[{value:"scroll"},{value:"fixed"},{value:"local"}]},v={property:"background-size",type:"select",defaults:"auto",value:"auto",options:[{value:"auto"},{value:"cover"},{value:"contain"}]},b={name:" ",property:"background-image",type:"color-linear",defaults:"none",value:"none",full:1},h={name:"&nbsp;",property:"background-image",type:"gpickr",value:"linear-gradient(270deg, rgba(66, 68, 90, 1) 0%,rgba(32, 182, 221, 1) 100%)",defaults:"none",full:1};const m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l(l({},{styleGradientOpts:{},propExtender:function(e){return e},typeProps:function(e){return e}}),t),n={typeBg:s,typeImage:d,typeBgRepeat:f,typeBgPos:g,typeBgAttach:y,typeBgSize:v,typeColorLin:b,typeGradient:h},a=e.StyleManager,c=a.getType("stack"),p=c.model;n=Object.keys(n).reduce((function(e,t){var o=n[t];return e[t]=r.propExtender(o)||o,e}),{});var m=function(e,t){return e&&e[t]?{value:e[t]}:void 0},O=function(e,t){var n=[l(l({},d),m(t,"background-image")),l(l({},f),m(t,"background-repeat")),l(l({},g),m(t,"background-position")),l(l({},y),m(t,"background-attachment")),l(l({},v),m(t,"background-size"))];switch(e){case"color":n=[l(l({},b),m(t,"background-image"))];break;case"grad":n=[l(l({},h),m(t,"background-image"))]}return r.typeProps(n,e)||n};!function(e,t){var r=t.getType("color"),n=r.model;t.addType("color-linear",{model:n.extend({__getFullValue:function(){var e=this.get("value"),t=this.get("defaults");return e?e===t?t:"linear-gradient(".concat(e,",").concat(e,")"):""}}),view:r.view.extend({onRender:function(){r.view.prototype.onRender.apply(this,arguments);var e=this.model.getValue(),t=this.model.getDefaultValue();if((e=e||t)&&"none"!==e){var n=e.indexOf("(")+1,o=e.lastIndexOf(")"),a=e.substring(n,o).split(",");console.log(a[0].trim()),this.setValue(a[0].trim())}}})})}(0,a),a.addType("bg",{model:p.extend({defaults:function(){return l(l({},p.prototype.defaults),{},{detached:1,preview:1,full:1,prepend:1,properties:[n.typeBg].concat(i(O()))})},init:function(){this.handleTypeChange=this.handleTypeChange.bind(this),this.on("change:selectedLayer",this.onNewLayerAdd)},_updateLayerProps:function(e,t){var r=e.collection.properties;r.remove(r.filter((function(e,t){return 0!==t}))),O(t,e.getValues()).forEach((function(e){return r.push(e)}))},onNewLayerAdd:function(){var e=this.getSelectedLayer();if(null!=e&&e.getValues){var t=e.collection.properties.at(0),r=e.getValues();this.handleTypeChange(t,r[u],{}),e.listenTo(t,"change:value",this.handleTypeChange)}},handleTypeChange:function(e,t,r){var n=this.getSelectedLayer();n&&this._updateLayerProps(n,t),r.fromInput&&this.trigger("updateValue")},__parseValue:function(e){var t=this,r=this.parseValue(e);return r.__layers=e.split(/,(?![^\(]*\)|rgb| rgb)/).map((function(e){return e.trim()})).map((function(e){return t.__parseLayer(e)})).filter(Boolean),r},__parseLayer:function(e){var t,r=!1,n=e.indexOf("url")>-1||e.indexOf("none")>-1,a=n?e.split(" "):[e];if(!n){var i=e.indexOf("(")+1,c=e.lastIndexOf(")"),l=e.substring(i,c).split(",");r=2===l.length&&l[0].trim()===l[1].trim()}return o(t={},u,n?"img":r?"color":"grad"),o(t,"background-image",a[0]||"none"),o(t,"background-repeat",a[5]||"repeat"),o(t,"background-size",a[4]||"auto"),o(t,"background-position",a[1]&&a[2]?"".concat(a[1]," ").concat(a[2]):"left top"),o(t,"background-attachment",a[6]||"scroll"),t},getStyleFromLayer:function(e){var t,r=this.__getJoin(),n=this.__getJoinLayers(),a=this.get("toStyle"),i=this.getName(),c=e.getValues();if(a)delete c[u],t=a(c,{join:r,joinLayers:n,name:i,layer:e,property:this});else{var l;switch(c[u]){case"img":l=[{name:i,value:"".concat(c["background-image"]||"none"," ").concat(c["background-position"]||"left top"," / ").concat(c["background-size"]||"auto"," ").concat(c["background-repeat"]||"repeat"," ").concat(c["background-attachment"]||"scroll")}];break;case"color":case"grad":l=[{name:i,value:c["background-image"]||"none"}]}t=this.isDetached()?l.reduce((function(e,t){return e[t.name]=t.value,e}),{}):o({},this.getName(),l.map((function(e){return e.value})).join(r))}return t}}),view:c.view}),a.addBuiltIn("bg",{property:"background",type:"bg",detached:!1})};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=w(w({},{}),t);window.GPickr&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=j(j({},{gpickrOpts:{}}),t),n=e.$,o=n("<div class=\"gp\" style=\"display:none\"><div class=\"gpickr\"></div></div>");n("body").append(o);var a=new GPickr(j({el:".gpickr",stops:[]},r.gpickrOpts));a.on("change",(function(e){return e.model&&e.model.setValueFromInput(e.getGradient())})),window.pckr=a;var i=o.find(".gpickr").get(0);e.StyleManager.addType("gpickr",{view:{events:{},templateInput:function(){return""},onRender:function(){var e=this.ppfx,t=this.model,r=this.model.getValue();r&&"none"!==r&&pckr.setGradient(r),pckr.model=t,this.el.querySelector(".".concat(e,"fields")).appendChild(i)},destroy:function(){}}})}(e,r),m(e,r)};return t})()));
//# sourceMappingURL=index.js.map