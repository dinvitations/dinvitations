/*! grapesjs-dinvitations - 1.0.1 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["grapesjs-dinvitations"]=t():e["grapesjs-dinvitations"]=t()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,()=>(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};e.r(t),e.d(t,{default:()=>a});const o=e=>{e.TraitManager.addType("file-asset",{createInput(){const t=document.createElement("div"),o=document.createElement("input");o.setAttribute("type","text"),o.value=this.model.get("value")||"";const n=document.createElement("button");return n.innerHTML="Choose Video",n.type="button",n.className="gjs-file-asset-btn",n.style="margin-left: 5px;",n.addEventListener("click",()=>{const t=this.target;t&&e.AssetManager.open({types:['video'],accept:'video/*',select(e){const o=e.get("src");t.set("video-src",o),t.addAttributes({"video-src":o}),t.view&&t.view.render()}})}),t.appendChild(o),t.appendChild(n),this.inputEl=o,t},onUpdate(){const e=this.model.get("value")||"";this.inputEl&&(this.inputEl.value=e)},onEvent(){if(!this.inputEl)return;const e=this.inputEl.value.trim();this.model.set("value",e),this.target.set("video-src",e),this.target.addAttributes({"video-src":e})}})},n={'grapesjs-dinvitations':{}},a=function(e){const t={i18n:{},...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};o(e),function(e){e.DomComponents.addType("background-video",{extend:"default",model:{defaults:{tagName:"div",draggable:!0,droppable:!0,attributes:{class:"background-video-wrapper"},provider:"html5",components:[],styles:`\n          .background-video-wrapper {\n            position: relative;\n            width: 100%;\n            height: 0;\n            padding-bottom: 56.25%;\n            overflow: hidden;\n          }\n          .background-video-wrapper iframe,\n          .background-video-wrapper video {\n            position: absolute;\n            top: 0; left: 0;\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n          }\n        `,traits:[{type:"text",name:"overlayId",label:"Overlay ID",changeProp:1},{type:"select",name:"provider",label:"Video Provider",changeProp:1,options:[{value:"html5",name:"Uploaded Video"},{value:"youtube",name:"YouTube"},{value:"youtube-nocookie",name:"YouTube (No Cookie)"},{value:"vimeo",name:"Vimeo"}]},{type:"file-asset",label:"Upload Video",name:"video-src",changeProp:1},{type:"text",name:"embed-src",label:"Embed ID",changeProp:1},{type:"color",label:"Overlay Color",name:"overlay-color",changeProp:1}]},init(){if(!this.get("overlayId")){const e=`video-overlay-${Date.now()}-${Math.floor(1e3*Math.random())}`;this.set("overlayId",e)}this.listenTo(this,"change:provider",this.updateProvider),this.listenTo(this,"change:video-src",this.updateHtml5Src),this.listenTo(this,"change:embed-src",this.updateEmbedSrc),this.listenTo(this,"change:overlay-color",this.updateOverlayColor),this.updateProvider()},updateProvider(){const e=this.get("provider"),t=this.get("components"),o=this.get("overlayId"),n=t.find(e=>e.getAttributes().id===o);let a;if(t.filter(e=>{const t=e.get("tagName");return"video"===t||"iframe"===t}).forEach(e=>t.remove(e)),"html5"===e)a={tagName:"video",type:"video",attributes:{autoplay:!0,loop:!0,muted:!0,playsinline:!0,controls:!1,src:this.get("video-src")||"",style:"width:100%; height:100%; object-fit:cover;"},draggable:!1};else{const t=this.get("embed-src")||"";let o="";"youtube"===e?o=`https://www.youtube.com/embed/${t}?autoplay=1&mute=1&loop=1&playlist=${t}`:"youtube-nocookie"===e?o=`https://www.youtube-nocookie.com/embed/${t}?autoplay=1&mute=1&loop=1&playlist=${t}`:"vimeo"===e&&(o=`https://player.vimeo.com/video/${t}?autoplay=1&muted=1&loop=1&background=1`),a={tagName:"iframe",attributes:{src:o,frameborder:0,allow:"autoplay; fullscreen",allowfullscreen:!0,style:"width:100%; height:100%;"},draggable:!1}}const i=n?t.indexOf(n):t.length;t.add(a,{at:i}),this.updateOverlayColor()},updateHtml5Src(){if("html5"!==this.get("provider"))return;const e=this.get("components").find(e=>"video"===e.get("tagName"));e&&e.set("src",this.get("video-src"))},updateEmbedSrc(){"html5"!==this.get("provider")&&this.updateProvider()},updateOverlayColor(){const e=this.get("components"),t=this.get("overlayId"),o=this.get("overlay-color")||"rgba(0,0,0,0.3)";let n=e.find(e=>e.getAttributes().id===t);if(!n){const a=this.addOverlayComponent(o);e.add(a),n=e.find(e=>e.getAttributes().id===t)}const a=n.getStyle()||{};n.setStyle({...a,background:o})},addOverlayComponent(e){return{tagName:"div",attributes:{id:this.get("overlayId"),class:"video-overlay"},style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:e},draggable:!1}}}})}(e),(e=>{const t=e.BlockManager;t.add("background-video",{label:"Background Video",category:"Basic",media:`\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n        <path d="M2.5,4.5H21.5C22.34,4.5 23,5.15 23,6V17.5C23,18.35 22.34,19 21.5,19H2.5C1.65,19 1,18.35 1,17.5V6C1,5.15 1.65,4.5 2.5,4.5M9.71,8.5V15L15.42,11.7L9.71,8.5M17.25,21H6.65C6.35,21 6.15,20.8 6.15,20.5C6.15,20.2 6.35,20 6.65,20H17.35C17.65,20 17.85,20.2 17.85,20.5C17.85,20.8 17.55,21 17.25,21Z" />\n      </svg>\n    `,content:{type:"background-video"},select:!0,activate:!0}),t.add("rsvp-buttons",{label:"RSVP Buttons",category:"DInvitations",media:`\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n        <path d="M6,1V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3H18V1H16V3H8V1H6M5,8H19V19H5V8M12.19,9C11.32,9 10.62,9.2 10.08,9.59C9.56,10 9.3,10.57 9.31,11.36L9.32,11.39H11.25C11.26,11.09 11.35,10.86 11.53,10.7C11.71,10.55 11.93,10.47 12.19,10.47C12.5,10.47 12.76,10.57 12.94,10.75C13.12,10.94 13.2,11.2 13.2,11.5C13.2,11.82 13.13,12.09 12.97,12.32C12.83,12.55 12.62,12.75 12.36,12.91C11.85,13.25 11.5,13.55 11.31,13.82C11.11,14.08 11,14.5 11,15H13C13,14.69 13.04,14.44 13.13,14.26C13.22,14.08 13.39,13.9 13.64,13.74C14.09,13.5 14.46,13.21 14.75,12.81C15.04,12.41 15.19,12 15.19,11.5C15.19,10.74 14.92,10.13 14.38,9.68C13.85,9.23 13.12,9 12.19,9M11,16V18H13V16H11Z" />\n      </svg>\n    `,content:()=>{const e=`${Date.now()}-${Math.floor(1e3*Math.random())}`;return`\n        <div id="rsvp-container-${e}" class="rsvp-group" data-rsvp-block-id="${e}">\n          <button id="rsvp-yes-${e}" class="btn-rsvp-yes">Yes</button>\n          <button id="rsvp-no-${e}" class="btn-rsvp-no">No</button>\n        </div>\n      `},select:!0,activate:!0}),t.add("guest-name",{label:"Guest Name",category:"DInvitations",media:`\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n        <path d="M18 2H12V9L9.5 7.5L7 9V2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V4A2 2 0 0 0 18 2M14 12A2 2 0 1 1 12 14A2 2 0 0 1 14 12M18 20H10V19C10 17.67 12.67 17 14 17S18 17.67 18 19Z" />\n      </svg>\n    `,content:{type:"text",content:"Guest Name",attributes:{class:"guest_name"}}}),t.add("guest-qrcode",{label:"QR Code",category:"DInvitations",media:`\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n        <path d="M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z" />\n      </svg>\n    `,content:{tagName:"img",type:"image",attributes:{class:"qr_code"}}}),t.add("event-date",{label:"Event Date",category:"DInvitations",media:`\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n        <path d="M6 1V3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.9 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.9 20.11 3 19 3H18V1H16V3H8V1H6M5 8H19V19H5V8M11 9V14H13V9H11M11 16V18H13V16H11Z" />\n      </svg>\n    `,content:{type:"text",content:"Event Date",attributes:{class:"event_date"}}}),t.add("address",{label:"Address",category:"DInvitations",media:`\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n        <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22S19 14.25 19 9C19 5.13 15.87 2 12 2M12 11.5C10.62 11.5 9.5 10.38 9.5 9S10.62 6.5 12 6.5 14.5 7.62 14.5 9 13.38 11.5 12 11.5Z" />\n      </svg>\n    `,content:{type:"text",content:"Address",attributes:{class:"address"}}}),t.add("location-link",{label:"Location Link",category:"DInvitations",media:`\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n        <path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z" />\n      </svg>\n    `,content:{tagName:"a",type:"link",content:"Open Maps",attributes:{target:"_blank",class:"location_link"}}})})(e),e.I18n&&e.I18n.addMessages({en:n,...t.i18n})};return t})());
//# sourceMappingURL=index.js.map